{{ attach_library('marazul/marazul') }}
{{ attach_library('marazul/room_lightbox') }}

<article{{ attributes.addClass('room-detail') }}>

  <div class="container py-5">
    <div class="row g-4">

      {# Columna izquierda: imagen principal + galer칤a + descripci칩n #}
      <div class="col-lg-7">

        {% if content.field_imagen_principal %}
          <div class="room-gallery room-gallery--main mb-3" data-room-main>
            {{ content.field_imagen_principal }}
          </div>
        {% endif %}

        {% if content.field_galeria_de_imagenes %}
          <div class="room-gallery room-gallery--thumbs mb-4" data-room-thumbs>
            <h2 class="h5 mb-3">M치s fotos</h2>

            {# OJO: este render debe venir con "Enlace: Archivo" #}
            <div class="room-thumbs-grid">
              {{ content.field_galeria_de_imagenes }}
            </div>
          </div>
        {% endif %}

        {% if content.body %}
          <div class="room-description">
            {{ content.body }}
          </div>
        {% endif %}

      </div>

      {# Columna derecha: datos clave y CTA #}
      <div class="col-lg-5">

        <div class="room-sidebar card p-3">

          <h1 class="h3 mb-3">{{ label }}</h1>

          {% if content.field_descripcion_corta %}
            <p class="text-muted mb-3">
              {{ content.field_descripcion_corta }}
            </p>
          {% endif %}

          {% if content.field_precio_desde %}
            <p class="fw-bold text-primary mb-1">
              Desde: {{ content.field_precio_desde }}
            </p>
          {% endif %}

          {% if content.field_capacidad %}
            <p class="mb-1">
              游논 Capacidad: {{ content.field_capacidad }}
            </p>
          {% endif %}

          {% if content.field_servicios %}
            <div class="small text-muted mb-3">
              {{ content.field_servicios }}
            </div>
          {% endif %}

          <div class="d-grid gap-2 mt-3">
            <a href="https://wa.me/573233074408?text=Hola%2C%20quiero%20informaci%C3%B3n%20sobre%20la%20{{ label|url_encode }}"
               class="btn btn-success"
               target="_blank"
               rel="noopener">
              Consultar esta habitaci칩n por WhatsApp
            </a>
          </div>

        </div>

      </div>

    </div>
  </div>

  {# Modal Bootstrap 5 para Lightbox #}
  <div class="modal fade room-lightbox" id="roomLightbox" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">

        <button type="button" class="btn-close room-lightbox__close" data-bs-dismiss="modal" aria-label="Cerrar"></button>

        <div class="modal-body p-0">
          <div id="roomLightboxCarousel" class="carousel slide" data-bs-ride="false" data-bs-interval="false">
            <div class="carousel-inner" data-room-lightbox-inner>
              {# El JS inserta aqu칤 los items #}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#roomLightboxCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Anterior</span>
            </button>

            <button class="carousel-control-next" type="button" data-bs-target="#roomLightboxCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Siguiente</span>
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>

</article>
