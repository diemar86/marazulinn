{# Hero global con imagen dinámica por página (node) #}

{% set hero_bg = '' %}

{# 1 Si estamos en un nodo y existe el campo #}
{% if node is defined and node and content.field_hero_foto is defined and content.field_hero_foto.entity %}
  {# Caso A: Media con imagen #}
  {% if content.field_hero_foto.entity.field_media_image is defined
    and content.field_hero_foto.entity.field_media_image.entity %}
    {% set hero_bg = file_url(content.field_hero_foto.entity.field_media_image.entity.uri.value) %}

  {# Caso B: File directo #}
  {% elseif content.field_hero_foto.entity.uri is defined %}
    {% set hero_bg = file_url(content.field_hero_foto.entity.uri.value) %}
  {% endif %}
{% endif %}

{# 2 Fallback si no hay imagen en la página #}
{% if not hero_bg %}
  {% set hero_bg = directory ~ '/images/hero-default.jpg' %}
{% endif %}

<div class="hero-decameron">

  <div class="hero-decameron__bg">
    <div class="hero-copy" style="background-image:url('{{ hero_bg }}');"></div>
  </div>

  <div class="hero-decameron__overlay"></div>

  {# Si quieres título dinámico #}
  <div class="hero-header container">
    {% if node is defined and node and label %}
      <h1 class="hero-title">{{ label }}</h1>
    {% endif %}
  </div>

  <div class="hero-decameron__booking">
    {% include '@marazul/components/booking-bar.html.twig' with { action_url: '/form/reservas' } %}
  </div>

</div>
